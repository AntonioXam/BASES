
DROP DATABASE IF EXISTS Banco;

CREATE DATABASE Banco;

USE Banco;


CREATE TABLE Cuentas (

	NCuenta 	INT, 
	Saldo 	INT NOT NULL,
	PRIMARY KEY(NCuenta)
);



SET @SALDO=0;



CREATE TRIGGER ingreso
AFTER INSERT ON Cuentas
FOR EACH ROW
SET @SALDO=@SALDO+NEW.Saldo;


CREATE TRIGGER actualizar
BEFORE UPDATE ON Cuentas
FOR EACH ROW
SET @SALDO=@SALDO-OLD.Saldo+NEW.Saldo;

CREATE TRIGGER sacar
BEFORE DELETE ON Cuentas
FOR EACH ROW
SET @SALDO=@SALDO-OLD.Saldo;

INSERT INTO Cuentas VALUES(101,40);
INSERT INTO Cuentas VALUES(102,50);
INSERT INTO Cuentas VALUES(103,60);
INSERT INTO Cuentas VALUES(104,70);


SELECT @SALDO;


UPDATE Cuentas
SET Saldo=100
WHERE NCuenta=101;

SELECT * FROM Cuentas;

SELECT @SALDO;

DELETE FROM Cuentas
WHERE NCuenta=104;

SELECT * FROM Cuentas;

SELECT @SALDO;